@tailwind base;
@tailwind components;
@tailwind utilities;

/* ─────────────────────────────────────────────────────────────
   SEMANTIC COLOR SYSTEM
   All colors route through CSS variables so every token adapts
   when the page switches between light / dark regions.
───────────────────────────────────────────────────────────── */
@layer base {
  :root {
    /* Backgrounds */
    --bg:         0 0% 100%;       /* #FFFFFF  page canvas       */
    --fg:         222 47% 11%;     /* #0F172A  primary text (navy-dark) */

    /* Muted */
    --muted:      210 40% 96%;     /* #EFF4FB  cool off-white    */
    --muted-fg:   215 16% 47%;     /* #64748B  accessible muted
                                      ratio on white: 4.7:1 ✅  */

    /* Cards */
    --card:       0 0% 100%;       /* #FFFFFF                    */
    --card-fg:    222 47% 11%;     /* #0F172A                    */

    /* Brand (deep red) */
    --brand:      0 72% 45%;       /* #B91C1C                    */
    --brand-fg:   0 0% 100%;       /* #FFFFFF  text on brand     */

    /* Accent (warm cream) */
    --accent:     24 33% 94%;      /* #F5EDE0                    */
    --accent-fg:  222 47% 11%;     /* #0F172A                    */

    /* Border */
    --border:     214 32% 91%;     /* #DDE5F0                    */

    /* Font */
    --font-inter: "Inter", system-ui, sans-serif;
  }

  /* Dark regions — add className="dark" to any section element */
  .dark {
    --bg:         222 47% 11%;     /* #0F172A  dark page canvas  */
    --fg:         0 0% 100%;       /* #FFFFFF  light text        */
    --muted:      217 33% 17%;     /* #1E2A3B                    */
    --muted-fg:   215 20% 65%;     /* #8FA3BF                    */
    --card:       222 47% 13%;     /* #121D2E                    */
    --card-fg:    0 0% 100%;       /* #FFFFFF                    */
    --brand:      0 72% 45%;       /* #B91C1C  stays red         */
    --brand-fg:   0 0% 100%;       /* #FFFFFF                    */
    --accent:     217 33% 17%;     /* #1E2A3B                    */
    --accent-fg:  0 0% 100%;       /* #FFFFFF                    */
    --border:     217 33% 25%;     /* #2C3E55                    */
  }

  html {
    scroll-behavior: smooth;
    -webkit-text-size-adjust: 100%;
  }

  body {
    @apply bg-bg text-fg antialiased;
    font-family: var(--font-inter);
  }

  /* Default border colour uses semantic token */
  *,
  ::before,
  ::after {
    border-color: hsl(var(--border));
  }

  /* Accessible focus ring site-wide */
  :focus-visible {
    outline: 2px solid hsl(var(--brand));
    outline-offset: 2px;
  }
}

/* ─────────────────────────────────────────────────────────────
   COMPONENT UTILITIES
───────────────────────────────────────────────────────────── */
@layer components {

  /* ── Buttons ─────────────────────────────────────────────── */

  /* Primary: brand bg / white text  →  6.1:1 ✅ */
  .btn-primary {
    @apply inline-flex items-center justify-center gap-2
           bg-brand text-brand-fg font-semibold
           px-6 py-3 rounded-lg
           hover:opacity-90
           active:scale-[0.98] transition-all duration-200
           focus-visible:outline-none focus-visible:ring-2
           focus-visible:ring-brand focus-visible:ring-offset-2;
  }

  /* Secondary: muted bg / fg text / border  →  WCAG AA ✅ */
  .btn-secondary {
    @apply inline-flex items-center justify-center gap-2
           bg-muted text-fg border border-border font-semibold
           px-6 py-3 rounded-lg
           hover:bg-accent hover:text-accent-fg
           active:scale-[0.98] transition-all duration-200
           focus-visible:outline-none focus-visible:ring-2
           focus-visible:ring-brand focus-visible:ring-offset-2;
  }

  /* Dark: fg bg / bg text  →  high contrast ✅ */
  .btn-dark {
    @apply inline-flex items-center justify-center gap-2
           bg-fg text-bg font-semibold
           px-6 py-3 rounded-lg
           hover:opacity-90
           active:scale-[0.98] transition-all duration-200
           focus-visible:outline-none focus-visible:ring-2
           focus-visible:ring-bg focus-visible:ring-offset-2
           focus-visible:ring-offset-fg;
  }

  /* Outline: brand border+text */
  .btn-outline {
    @apply inline-flex items-center justify-center gap-2
           border-2 border-brand text-brand font-semibold
           px-6 py-3 rounded-lg
           hover:bg-brand hover:text-brand-fg
           active:scale-[0.98] transition-all duration-200
           focus-visible:outline-none focus-visible:ring-2
           focus-visible:ring-brand focus-visible:ring-offset-2;
  }

  /* Ghost: transparent / fg colour */
  .btn-ghost {
    @apply inline-flex items-center justify-center gap-2
           text-fg font-semibold
           px-6 py-3 rounded-lg
           hover:bg-muted
           active:scale-[0.98] transition-all duration-200
           focus-visible:outline-none focus-visible:ring-2
           focus-visible:ring-brand focus-visible:ring-offset-2;
  }

  /* ── Layout ──────────────────────────────────────────────── */

  .section-pad {
    @apply px-4 sm:px-6 lg:px-8 py-12 sm:py-16 lg:py-20;
  }

  .container-max {
    @apply max-w-7xl mx-auto;
  }

  /* ── Forms ───────────────────────────────────────────────── */

  .input-base {
    @apply w-full border border-border rounded-lg px-4 py-3
           text-sm text-fg bg-card
           placeholder:text-muted-fg
           focus:outline-none focus:ring-2 focus:ring-brand
           focus:border-transparent transition-all;
  }

  /* ── Cards ───────────────────────────────────────────────── */

  .card {
    @apply bg-card text-card-fg rounded-2xl shadow-sm
           border border-border overflow-hidden
           hover:shadow-md transition-shadow duration-200;
  }

  /* ── Badges ──────────────────────────────────────────────── */

  /* EBT/WIC – green-800 on green-50: 7.1:1 ✅ */
  .badge-ebt {
    @apply inline-flex items-center gap-1.5
           bg-green-50 text-green-800 border border-green-200
           font-semibold text-xs px-3 py-1.5 rounded-full;
  }

  /* Admin status badges */
  .badge-active {
    @apply text-xs font-semibold px-2 py-1 rounded-full
           bg-green-100 text-green-800; /* 5.9:1 ✅ */
  }

  .badge-inactive {
    @apply text-xs font-semibold px-2 py-1 rounded-full
           bg-muted text-muted-fg;
  }

  /* ── Typography helpers ──────────────────────────────────── */

  .label-eyebrow {
    @apply text-xs font-bold uppercase tracking-widest text-brand;
  }
}
